(this["webpackJsonphello-react"]=this["webpackJsonphello-react"]||[]).push([[0],{1287:function(e,t,a){},1293:function(e,t){},1294:function(e,t){},1295:function(e,t,a){},1296:function(e,t,a){},1297:function(e,t,a){},1298:function(e,t,a){},1299:function(e,t,a){},1302:function(e,t,a){},1303:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),c=a.n(o),i=(a(592),a(154)),l=a.n(i),s={setUser:function(e){l.a.set("local_user",e)},getUser:function(){return l.a.get("local_user")||"{}"},removeUser:function(){l.a.remove("local_user")},setLang:function(e){l.a.set("local_lang",e),window.location.reload(!0)},getLang:function(){return l.a.get("local_lang")||""},removeLang:function(){l.a.remove("local_lang"),window.location.reload(!0)}},u=a(9),m=a(10),p=a(12),d=a(11),f=a(82),h=a(47),g=a(123),y=a.n(g),v=(a(183),a(73)),b=(a(616),a(180)),E=(a(618),a(554)),O=(a(620),a(104),a(4)),k=(a(366),a(76)),x=a(126),_=a(21),j=a.n(_),w=a(33),C=a(110),S=(a(112),a(34)),N=a(356),I=a.n(N);function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return console.log("params",e,t,a),new Promise((function(n,r){("GET"===a?I.a.get(e,{params:t}):I.a.post(e,t)).then((function(e){n(e.data)})).catch((function(e){S.a.error("\u8bf7\u6c42\u51fa\u9519"+e)}))}))}var L="https://www.fastmock.site/mock/7b3b73f75c787dbfe28bf649db17ed5e/api",A="http://39.100.225.255:5000",M=function(e){var t=e.categoryName,a=e.parentId;return D("".concat(A,"/manage/category/add"),{parentId:a,categoryName:t},"POST")},T=function(e){return D("".concat(A,"/manage/img/delete"),{name:e},"POST")},P=function(e){return D("".concat(A,"/manage/role/add"),{roleName:e},"POST")},F=function(e){return D("".concat(A,"/manage/role/update"),e,"POST")},U=function(){return D("".concat(A,"/manage/user/list"))},K=function(e){return D("".concat(A,"/manage/user/delete"),{userId:e},"POST")},W=function(e){return D("".concat(A,"/manage/user/").concat(e._id?"update":"add"),e,"POST")},z=function(e){var t=e.username,a=e.password;return D("".concat(L,"/login"),{username:t,password:a},"POST")},R=function(e){return D("".concat(L,"/category/list"),{parentId:e})},$=function(e){var t=e.categoryId,a=e.categoryName;return D("".concat(L,"/category/update"),{categoryId:t,categoryName:a},"POST")},B=function(e){var t=e.pageNum,a=e.pageSize;return D("".concat(L,"/product/list"),{pageNum:t,pageSize:a})},H=function(e){return D("".concat(L,"/category/info"),{categoryId:e})},Y=function(e){return D("".concat(L,"/product/").concat(e._id?"update":"add"),e,"POST")},J=function(e,t){return D("".concat(L,"/product/updateStatus"),{productId:e,status:t},"POST")},V=function(e){var t=e.pageNum,a=e.pageSize,n=e.searchName,r=e.searchType;return D("".concat(L,"/product/search"),Object(C.a)({pageNum:t,pageSize:a},r,n))},q=s.getLang("local_lang")||"zh-cn",Z=a(685)("./"+q+".json"),G=[{title:Z.menu_index,key:"/home",icon:"home",isPublic:!0},{title:Z.menu_product,key:"/pro",icon:"appstore",children:[{title:Z.menu_product_category,key:"/pro/category",icon:"unordered-list"},{title:Z.menu_product_pro,key:"/pro/product",icon:"appstore"}]},{title:Z.menu_role,key:"/role",icon:"user"},{title:Z.menu_user,key:"/user",icon:"user"},{title:Z.menu_graph,key:"/graph",icon:"line-chart",children:[{title:Z.menu_graph_bar,key:"/graph/bar",icon:"bar-chart"},{title:Z.menu_graph_line,key:"/graph/line",icon:"stock"},{title:Z.menu_graph_pie,key:"/graph/pie",icon:"pie-chart"}]},{title:Z.menu_excel,key:"/excel",icon:"file-excel",children:[{title:Z.menu_excel_in_out,key:"/excel/inOrOut",icon:"file-excel"}]},{title:Z.menu_com,key:"/com",icon:"code",children:[{title:Z.menu_com_security,key:"/com/security",icon:"security-scan"},{title:Z.menu_com_slider,key:"/com/slider",icon:"sliders"},{title:Z.menu_com_upload,key:"/com/user-intl",icon:"cloud-upload"},{title:Z.menu_com_magnifier,key:"/com/magnifier",icon:"cloud-upload"}]},{title:Z.menu_code,key:"/code",icon:"line-chart"},{title:Z.menu_guide,key:"/guide",icon:"notification"}],Q=void 0,X=k.a.SubMenu,ee=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={openKeys:[],selectedKeys:[]},e.getOpenKeys=function(e){for(var t="",a=[],n=e.split("/").map((function(e){return"/"+e})),r=1;r<n.length-1;r++)t+=n[r],a.push(t);return a},e.onOpenChange=function(t){if(console.log("openChange"),0===t.length||1===t.length)return e.setState({openKeys:t}),void console.log("openChange-if",t);var a=t[t.length-1];a.includes(t[0])?e.setState({openKeys:t}):e.setState({openKeys:[a]})},e.getMenuNodes=function(t){return t.map((function(t){if(e.hasAuth(t))return t.children?r.a.createElement(X,{key:t.key,title:r.a.createElement("span",null,r.a.createElement(O.a,{type:t.icon}),r.a.createElement("span",null,t.title))},e.getMenuNodes(t.children)):r.a.createElement(k.a.Item,{key:t.key},r.a.createElement(f.b,{to:t.key,onClick:function(){e.props.setHeadTitle(t.title)}},r.a.createElement(O.a,{type:t.icon}),r.a.createElement("span",null,t.title)))}))},e.getMenuNodes_2=function(t){var a=e.props.location.pathname;return t.reduce((function(t,n){e.hasAuth(n)&&(n.children?(n.children.find((function(e){return e.key===a}))&&e.setState({}),t.push(r.a.createElement(X,{key:n.key,title:r.a.createElement("span",null,r.a.createElement(O.a,{type:n.icon}),r.a.createElement("span",null,n.title))},e.getMenuNodes_2(n.children)))):t.push(r.a.createElement(k.a.Item,{key:n.key},r.a.createElement(f.b,{to:n.key},r.a.createElement(O.a,{type:n.icon}),n.title))));return t}),[])},e.hasAuth=function(e){var t=e.key,a=e.isPublic,n=JSON.parse(r.a.$storage_utils.getUser()),o=n.role.menus;return!("admin"!==n.username&&!a&&-1===o.indexOf(t))||!!e.children&&!!e.children.find((function(e){return-1!==o.indexOf(e.key)}))},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.location.pathname;this.getOpenKeys(e).length>1?this.setState({selectedKeys:this.getOpenKeys(e)[1],openKeys:this.getOpenKeys(e)[0]}):this.setState({selectedKeys:[e],openKeys:this.getOpenKeys(e)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.menuList,n=t.collapsed,o=this.state,c=o.openKeys,i=o.selectedKeys,l=n?[]:c;return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(k.a,{mode:"inline",theme:"dark",selectedKeys:i,onClick:function(t){var a=t.key;return e.setState({selectedKeys:[a]})},onOpenChange:this.onOpenChange,openKeys:l},this.getMenuNodes(a)))}}]),a}(n.Component),te=Object(x.b)((function(e){return{}}),{setHeadTitle:function(e){return{type:"set_head_title",data:e}}})(Object(h.g)(ee)),ae=a(553),ne=a.n(ae),re=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"left-nav"},r.a.createElement("div",{className:"left-nav-header",id:"navAside"},r.a.createElement(E.a,{src:ne.a,size:"large"}),r.a.createElement("h1",null,r.a.$intl.get("admin_manager"))),r.a.createElement("div",{className:"left-nav-menu"},r.a.createElement(te,{menuList:G,collapsed:this.props.collapsed})))}}]),a}(n.Component),oe=(a(391),a(178)),ce=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).menu=function(){return r.a.createElement(k.a,null,r.a.createElement(k.a.Item,{key:"1"},r.a.createElement(O.a,{type:"user"}),r.a.createElement("span",null,r.a.$intl.get("dropdown_user"))),r.a.createElement(k.a.Item,{key:"2"},r.a.createElement(O.a,{type:"setting"}),r.a.$intl.get("dropdown_sys")),r.a.createElement(k.a.Item,{key:"3"},r.a.createElement("span",{onClick:e.props.loginOut},r.a.createElement(O.a,{type:"logout"}),r.a.$intl.get("dropdown_logiout"))))},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(oe.a,{overlay:this.menu.bind(this)},r.a.createElement("span",{className:"ant-dropdown-link",href:"#",onClick:function(e){return e.preventDefault()}},r.a.$intl.get("personal_center"))))}}]),a}(n.Component),ie=(a(700),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={isZh:!0},e.changeLang=function(t){r.a.$storage_utils.setLang(t),e.setState({isZh:"zh-cn"===t})},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.setState({isZh:"zh-cn"===y.a.get("lang")})}},{key:"render",value:function(){var e=this,t=this.state.isZh;return r.a.createElement("div",null,r.a.createElement("span",{className:t?"checked":"",onClick:function(){e.changeLang("zh-cn")}},"ZH"),"/",r.a.createElement("span",{className:t?"":"checked",onClick:function(){e.changeLang("en-us")}},"EN"))}}]),a}(n.Component)),le=(a(701),a(557)),se=a(1307),ue=Object(se.a)({scriptUrl:"//at.alicdn.com/t/font_2103771_ka1xg8nab08.js"}),me=a(56),pe=a(69),de=a.n(pe),fe={"--font-size-large-x":"22px","--font-size-large":"18px","--font-size-medium":"14px","--font-size-medium-x":"16px","--font-size-small-s":"10px","--font-size-small":"12px"},he=Object(me.a)({"--sider-bg":de.a.c_fff,"--sider-tit":de.a.main_color,"--sider-bar-item":de.a.main_color_light,"--main-f-color":de.a.c_121212,"--switch-theme":de.a.main_color,"--content-bg":de.a.gray_white,"--fotter-bg":de.a.gray_white,"--fill-1":"#fff","--text":"#3c3c3c","--text-1":"#757575","--text-2":"#f00"},fe),ge=Object(me.a)({"--sider-bg":de.a.c_121212,"--sider-tit":de.a.c_fff,"--sider-bar-item":de.a.main_color,"--main-f-color":de.a.c_fff,"--switch-theme":"rgba(255,255,255,.2)","--content-bg":de.a.light_dark,"--fotter-bg":de.a.c_121212,"--fill-1":"#222","--text":"#fff","--text-1":"rgba(255, 255, 255, 0.3)","--text-2":"#ffcd32"},fe),ye=a(556),ve=function(e){document.documentElement.setAttribute("data-theme",e?"light":"dark"),Object(ye.a)({watch:!0,variables:e?he:ge,onlyLegacy:!1})},be=function(){return r.a.createElement("div",null,r.a.createElement(le.a,{checkedChildren:r.a.createElement(ue,{type:"icon-sun"}),unCheckedChildren:r.a.createElement(ue,{type:"icon-moon_zzz_fill"}),defaultChecked:!0,onChange:function(e){return function(e){ve(e)}(e)}}))},Ee=(a(704),a(127)),Oe=a.n(Ee),ke=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={currentTime:Oe()().format("YYYY-MM-DD HH:mm:ss")},e.toggleCollapsed=function(){e.props.toggleCollapsed()},e.getCurrentTime=function(){e.timer=setInterval((function(){var t=Oe()().format("YYYY-MM-DD HH:mm:ss");e.setState({currentTime:t})}),1e3)},e.getWeather=function(){},e.componentWillUnmount=function(){clearInterval(e.timer)},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getCurrentTime(),this.getWeather()}},{key:"render",value:function(){var e=this.props,t=e.collapsed,a=e.loginOut,n=e.headetitle,o=JSON.parse(r.a.$storage_utils.getUser());return r.a.createElement("div",{className:"navHeader"},r.a.createElement("div",{className:"toggle-btn",onClick:this.toggleCollapsed,id:"collapseBtn"},r.a.createElement(O.a,{type:t?"menu-unfold":"menu-fold"})),r.a.createElement("div",{className:"centerText"},n),r.a.createElement("div",{className:"header-info"},r.a.createElement("div",{className:"welcome"},r.a.createElement("p",{id:"currentTime"},this.state.currentTime),"\u6b22\u8fce",r.a.createElement("span",null,o.username)),r.a.createElement("div",{id:"usercenter"},r.a.createElement(ce,{loginOut:a})),r.a.createElement("div",{className:"lang"},r.a.createElement(ie,null)),r.a.createElement("div",{className:"switch-theme"},r.a.createElement(be,null))))}}]),a}(n.Component),xe=Object(x.b)((function(e){return{headetitle:e.headetitle}}),{})(r.a.memo(ke)),_e=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-container"},"\u9996\u9875",r.a.$intl.get("hello"))}}]),a}(n.Component),je=(a(101),a(50)),we=(a(208),a(102)),Ce=(a(70),a(27)),Se=(a(294),a(95),a(40)),Ne=(a(131),a(42)),Ie=(a(223),a(68)),De=Ie.a.Option,Le=Ne.a.Item,Ae=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentWillMount",value:function(){this.props.setForm(this.props.form)}},{key:"render",value:function(){var e=this.props,t=e.categorysList,a=e.parentId,n=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"edit-category"},r.a.createElement(Ne.a,{onSubmit:this.handleSubmit},r.a.createElement(Le,{label:"\u6240\u5c5e\u5206\u7c7b\uff1a"},n("parentId",{initialValue:a,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5206\u7c7b\uff01"}]})(r.a.createElement(Ie.a,{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5206\u7c7b\uff01"},r.a.createElement(De,{value:"0"},"\u54c1\u7c7b\u7ba1\u7406"),t.map((function(e){return r.a.createElement(De,{value:e._id,key:e._id},e.name)}))))),r.a.createElement(Le,{label:"\u5206\u7c7b\u540d\u79f0\uff1a"},n("categoryName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"},{min:4,message:"\u5206\u7c7b\u540d\u79f0\u957f\u5ea6\u5fc5\u987b\u5927\u4e8e4\u4f4d\uff01"},{max:12,message:"\u5206\u7c7b\u540d\u79f0\u957f\u5ea6\u5fc5\u987b\u5c0f\u4e8e12\u4f4d"}]})(r.a.createElement(Se.a,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"})))))}}]),a}(n.Component),Me=Ne.a.create()(Ae),Te=a(1),Pe=a.n(Te),Fe=Ne.a.Item,Ue=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentWillMount",value:function(){this.props.setForm(this.props.form)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.categoryName;return r.a.createElement("div",{className:"edit-category"},r.a.createElement(Ne.a,null,r.a.createElement(Fe,{label:"\u5206\u7c7b\u540d\u79f0\uff1a",labelCol:{span:4},wrapperCol:{span:12}},e("categoryName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"},{min:4,message:"\u5206\u7c7b\u540d\u79f0\u957f\u5ea6\u5fc5\u987b\u5927\u4e8e4\u4f4d\uff01"},{max:12,message:"\u5206\u7c7b\u540d\u79f0\u957f\u5ea6\u5fc5\u987b\u5c0f\u4e8e12\u4f4d"}],initialValue:t})(r.a.createElement(Se.a,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"})))))}}]),a}(n.Component);Ue.propType={categoryName:Pe.a.string.isRequired,setForm:Pe.a.func.isRequired};var Ke=Ne.a.create()(Ue),We={defaultPageSize:6,showQuickJumper:!0},ze=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={categorys:[],loading:!1,parentId:"0",parentName:"",subCategory:[],showStatus:0},e.initColumns=function(){e.columns=[{title:"\u5206\u7c7b\u540d\u79f0",dataIndex:"name"},{title:"\u64cd\u4f5c",width:"25%",dataIndex:"",render:function(t){return r.a.createElement("div",null,r.a.createElement("span",{className:"link",onClick:function(){return e.showUpdate(t)}},r.a.createElement(O.a,{type:"edit"}),"\u4fee\u6539\u5206\u7c7b"),"0"===e.state.parentId?r.a.createElement("span",{className:"link",onClick:function(){return e.showSubCategory(t)}},r.a.createElement(O.a,{type:"edit"}),"\u67e5\u770b\u5b50\u5206\u7c7b"):null)}}]},e.getCategorys=function(){var t=Object(w.a)(j.a.mark((function t(a){var n,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),a=a||e.state.parentId,t.next=4,R(a);case 4:n=t.sent,console.log("\u54c1\u7c7b\u5217\u8868\u6570\u636e",n),e.setState({loading:!1}),0===n.status?(r=n.data,"0"===a?e.setState({categorys:r}):e.setState({subCategory:r})):S.a.error("\u83b7\u53d6\u5206\u7c7b\u5217\u8868\u5931\u8d25");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showCategory=function(){e.setState({parentId:"0",subCategory:[],parentName:""})},e.showSubCategory=function(t){e.setState({parentId:t._id,parentName:t.name},(function(){e.getCategorys()}))},e.showAdd=function(){e.setState({showStatus:1})},e.showUpdate=function(t){e.edit_category=t,e.setState({showStatus:2})},e.addCategory=function(){e.form.validateFields(function(){var t=Object(w.a)(j.a.mark((function t(a,n){var r,o,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=8;break}return e.setState({showStatus:0}),r=n.categoryName,o=n.parentId,t.next=5,M({parentId:o,categoryName:r});case 5:c=t.sent,e.form.resetFields(),0===c.status&&(o===e.state.parentId?e.getCategorys():"0"===o&&e.getCategorys("0"));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},e.updateCategory=function(){e.form.validateFields(function(){var t=Object(w.a)(j.a.mark((function t(a,n){var r,o,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=9;break}return r=e.edit_category._id,o=e.form.getFieldValue("categoryName"),t.next=5,$({categoryId:r,categoryName:o});case 5:c=t.sent,e.form.resetFields(),0===c.status&&e.getCategorys(),e.handleCancel();case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},e.handleCancel=function(t){e.form.resetFields(),e.setState({showStatus:0})},e}return Object(m.a)(a,[{key:"componentWillMount",value:function(){this.initColumns()}},{key:"componentDidMount",value:function(){this.getCategorys()}},{key:"render",value:function(){var e=this,t=this.state,a=t.categorys,n=t.loading,o=t.parentId,c=t.subCategory,i=t.parentName,l=t.showStatus,s=this.edit_category||{};this.selectedId="0"===o?a[0]&&a[0]._id:o;var u="0"===o?"\u54c1\u7c7b\u7ba1\u7406":r.a.createElement("div",null,r.a.createElement("span",{className:"link",onClick:this.showCategory},"\u54c1\u7c7b\u7ba1\u7406"),r.a.createElement(O.a,{type:"arrow-right",style:{marginRight:10,marginLeft:10}}),r.a.createElement("span",null,i)),m=r.a.createElement(Ce.a,{type:"primary",onClick:this.showAdd},r.a.createElement(O.a,{type:"plus"}),"\u6dfb\u52a0");return r.a.createElement("div",{className:"container category-container"},r.a.createElement(je.a,{title:u,extra:m},r.a.createElement(we.a,{rowKey:"_id",dataSource:"0"===o?a:c,bordered:!0,loading:n,columns:this.columns,pagination:We}),r.a.createElement(v.a,{title:"\u6dfb\u52a0\u5206\u7c7b",visible:1===l,onOk:this.addCategory,onCancel:this.handleCancel,cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a"},r.a.createElement(Me,{categorysList:a,setForm:function(t){return e.form=t},parentId:o})),r.a.createElement(v.a,{title:"\u66f4\u65b0\u5206\u7c7b",visible:2===l,onOk:this.updateCategory,onCancel:this.handleCancel},r.a.createElement(Ke,{categoryName:s.name,setForm:function(t){return e.form=t}}))))}}]),a}(n.Component),Re=(a(413),a(153)),$e="http://39.100.225.255:5000",Be="".concat($e,"/upload/"),He="".concat($e,"/manage/img/upload"),Ye=Ie.a.Option,Je=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={productList:[],total:"",loading:!1,searchName:"",searchType:"productName"},e.initColumns=function(){e.columns=[{title:"\u5546\u54c1\u540d\u79f0",dataIndex:"name",render:function(e){return r.a.createElement("a",{href:"/#"},e)}},{title:"\u5546\u54c1\u63cf\u8ff0",dataIndex:"desc"},{title:"\u4ef7\u683c",width:100,dataIndex:"price",render:function(e){return"\uffe5".concat(e)}},{title:"\u72b6\u6001",width:100,render:function(t){var a=t.status,n=t._id,o=t.name;return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(Re.a,{color:1===a?"#2DAC91":"#f00",onClick:function(){return e.productStatus(1===a?2:1,n,o)}},1===a?"\u4e0b\u67b6":"\u4e0a\u67b6"),r.a.createElement("br",null),r.a.createElement("span",{style:{color:1===a?"#2DAC91":"#999"}},1===a?"\u5728\u552e":"\u5df2\u4e0b\u67b6"))}},{title:"\u64cd\u4f5c",dataIndex:"product",width:150,render:function(t,a){return r.a.createElement("div",null,r.a.createElement(Re.a,{color:"#2DAC91",onClick:function(){return e.props.history.push("/pro/product/detail",{record:a})}},"\u8be6\u60c5"),r.a.createElement(Re.a,{color:"#2DAC91",onClick:function(){return e.props.history.push("/pro/product/edit",a)}},"\u7f16\u8f91"))}}]},e.getProducts=function(){var t=Object(w.a)(j.a.mark((function t(a){var n,r,o,c,i,l,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.pageNum=a,e.setState({loading:!0}),n=e.state,r=n.searchName,o=n.searchType,!r){t.next=9;break}return t.next=6,V({pageSize:4,pageNum:a,searchName:r,searchType:o});case 6:c=t.sent,t.next=12;break;case 9:return t.next=11,B({pageSize:4,pageNum:a});case 11:c=t.sent;case 12:e.setState({loading:!1}),0===c.status&&(i=c.data,l=i.total,s=i.list,e.setState({total:l,productList:s}));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.productStatus=function(){var t=Object(w.a)(j.a.mark((function t(a,n,r){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J(n,a);case 2:0===t.sent.status&&(S.a.success("\u5546\u54c1\u66f4\u65b0\u6210\u529f"),e.getProducts(e.pageNum));case 4:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),e}return Object(m.a)(a,[{key:"componentWillMount",value:function(){this.initColumns()}},{key:"componentDidMount",value:function(){this.getProducts(1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.productList,n=t.total,o=t.loading,c=t.searchType,i=r.a.createElement(Ce.a,{type:"primary",onClick:function(){return e.props.history.push("/pro/product/edit")}},r.a.createElement(O.a,{type:"plus"}),"\u6dfb\u52a0\u5546\u54c1"),l=r.a.createElement("div",null,r.a.createElement(Ie.a,{value:c,style:{width:150},onChange:function(t){return e.setState({searchType:t})}},r.a.createElement(Ye,{value:"productName"},"\u6309\u540d\u79f0\u641c\u7d22"),r.a.createElement(Ye,{value:"productDesc"},"\u6309\u63cf\u8ff0\u641c\u7d22")),r.a.createElement(Se.a,{placeholder:"\u5173\u952e\u5b57",style:{width:150,margin:"0 15px"},onChange:function(t){return e.setState({searchName:t.target.value})}}),r.a.createElement(Ce.a,{type:"primary",onClick:function(){return e.getProducts(1)}},"\u641c\u7d22"));return r.a.createElement(je.a,{type:"inner",className:"product-index",title:l,extra:i},r.a.createElement(we.a,{columns:this.columns,dataSource:a,bordered:!0,loading:o,rowKey:"_id",pagination:{current:this.pageNum,total:n,defaultCurrent:1,defaultPageSize:4,onChange:this.getProducts,showQuickJumper:!0}}))}}]),a}(n.Component),Ve=(a(841),a(365)),qe=Ve.a.Item,Ze=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={cName1:"",cName2:""},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){var t,a,n,r,o,c,i,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.location.state.record,a=t.pCategoryId,n=t.categoryId,"0"!==a){e.next=9;break}return e.next=4,H(n);case 4:r=e.sent,o=r.data.name,this.setState({cName1:o}),e.next=15;break;case 9:return e.next=11,Promise.all([H(a),H(n)]);case 11:c=e.sent,i=c[0].data.name,l=c[1].data.name,this.setState({cName1:i,cName2:l});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.location.state.record,a=t.name,n=t.desc,o=t.price,c=t.detail,i=t.imgs,l=this.state,s=l.cName1,u=l.cName2,m=r.a.createElement("div",null,r.a.createElement(O.a,{type:"arrow-left",className:"arrow",onClick:function(){return e.props.history.goBack()}}),"\u5546\u54c1\u8be6\u60c5");return r.a.createElement(je.a,{title:m,bordered:!1,className:"product-index product-detail"},r.a.createElement(Ve.a,null,r.a.createElement(qe,null,r.a.createElement("span",{className:"left-tit"},"\u5546\u54c1\u540d\u79f0\uff1a"),r.a.createElement("span",{className:"right-con"},a)),r.a.createElement(qe,null,r.a.createElement("span",{className:"left-tit"},"\u5546\u54c1\u63cf\u8ff0\uff1a"),r.a.createElement("span",{className:"right-con"},n)),r.a.createElement(qe,null,r.a.createElement("span",{className:"left-tit"},"\u5546\u54c1\u4ef7\u683c\uff1a"),r.a.createElement("span",{className:"right-con"},o,"\u5143")),r.a.createElement(qe,null,r.a.createElement("span",{className:"left-tit"},"\u6240\u5c5e\u5206\u7c7b\uff1a"),r.a.createElement("span",{className:"right-con"},s,u?"--\x3e ".concat(u):"")),r.a.createElement(qe,null,r.a.createElement("span",{className:"left-tit"},"\u5546\u54c1\u56fe\u7247\uff1a"),r.a.createElement("div",{className:"right-con"},i.map((function(e){return r.a.createElement("img",{key:e,src:e,className:"picker",alt:"img"})})))),r.a.createElement(qe,null,r.a.createElement("span",{className:"left-tit"},"\u5546\u54c1\u8be6\u60c5\uff1a"),r.a.createElement("span",{className:"right-con",dangerouslySetInnerHTML:{__html:c}}))))}}]),a}(n.Component),Ge=(a(843),a(583)),Qe=a(214),Xe=a(262),et=(a(1305),a(582));function tt(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}var at=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(u.a)(this,a),(n=t.call(this,e)).handleCancel=function(){return n.setState({previewVisible:!1})},n.handlePreview=function(){var e=Object(w.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,tt(t.originFileObj);case 3:t.preview=e.sent;case 4:n.setState({previewImage:t.url||t.preview,previewVisible:!0});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(){var e=Object(w.a)(j.a.mark((function e(t){var a,r,o,c,i,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.file,r=t.fileList,"done"!==a.status){e.next=6;break}0===(o=a.response).status?(S.a.success("\u4e0a\u4f20\u56fe\u7247\u6210\u529f"),c=o.name,i=o.url,(a=r[r.length-1]).name=c,a.url=i):S.a.error("\u4e0a\u4f20\u56fe\u7247\u5931\u8d25"),e.next=12;break;case 6:if("removed"!==a.status){e.next=12;break}return e.next=9,T(a.name?a.name:a.response.data.name);case 9:l=e.sent,console.log("\u5220\u9664\u56fe\u7247",a),0===l.status&&S.a.success("\u56fe\u7247\u5220\u9664\u6210\u529f");case 12:n.setState({fileList:r});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getImgs=function(){return console.log("\u5b50\u7ec4\u4ef6"),n.state.fileList.map((function(e){return e.name}))};var r=[],o=n.props.imgs;return o&&o.length>0&&(r=o.map((function(e,t){return{uid:-t,name:e,status:"done",url:"".concat(Be).concat(e)}}))),n.state={previewVisible:!1,previewImage:"",fileList:r},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.previewVisible,a=e.previewImage,n=e.fileList,o=r.a.createElement("div",null,r.a.createElement(O.a,{type:"plus"}),r.a.createElement("div",{className:"ant-upload-text"},"Upload"));return r.a.createElement("div",{className:"clearfix"},r.a.createElement(et.a,{action:He,accept:"image/*",listType:"picture-card",name:"image",fileList:n,onPreview:this.handlePreview,onChange:this.handleChange},n.length>=3?null:o),r.a.createElement(v.a,{visible:t,footer:null,onCancel:this.handleCancel},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:a})))}}]),a}(r.a.Component),nt=a(151),rt=a(567),ot=a(568),ct=a.n(ot),it=a(362),lt=a.n(it),st=(a(979),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(u.a)(this,a),(n=t.call(this,e)).onEditorStateChange=function(e){n.setState({editorState:e})},n.getEditorText=function(){return ct()(Object(nt.convertToRaw)(n.state.editorState.getCurrentContent()))},n.uploadImageCallBack=function(e){return new Promise((function(t,a){var n=new XMLHttpRequest;n.open("POST",He);var r=new FormData;r.append("image",e),n.send(r),n.addEventListener("load",(function(){var e=JSON.parse(n.responseText).data.url;t({data:{link:e}})})),n.addEventListener("error",(function(){var e=JSON.parse(n.responseText);a(e)}))}))};var r=nt.EditorState.createEmpty(),o=n.props.detail;if(o&&lt()(o)){var c=nt.ContentState.createFromBlockArray(lt()(o).contentBlocks);r=nt.EditorState.createWithContent(c)}return n.state={editorState:r},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state.editorState;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(rt.Editor,{editorState:e,editorStyle:{border:"1px solid #D9D9D9",minHeight:400,padding:5},onEditorStateChange:this.onEditorStateChange,toolbar:{image:{uploadCallback:this.uploadImageCallBack,alt:{present:!0,mandatory:!0}}}})))}}]),a}(n.Component)),ut=Ne.a.Item,mt=Se.a.TextArea,pt=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={options:[]},n.validatePrice=function(e,t,a){console.log("\u503c\u9a8c\u8bc1",1*t,typeof t),1*t>0?a():a("\u5546\u54c1\u4ef7\u683c\u5fc5\u987b\u5927\u4e8e0")},n.submit=function(e){e.preventDefault(),n.props.form.validateFields(function(){var e=Object(w.a)(j.a.mark((function e(t,a){var r,o,c,i,l,s,u,m,p;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("\u9a8c\u8bc1",a),t){e.next=13;break}return r=a.name,o=a.desc,c=a.price,1===(i=a.categorysId).length?(l="0",s=i[0]):(l=i[0],s=i[1]),u=n.uploadimg.current.getImgs(),m=n.richtext.current.getEditorText(),console.log(m),p={name:r,desc:o,price:c,imgs:u,detail:m,pCategoryId:l,categoryId:s},n.isUpdate&&(p._id=n.product._id),e.next=11,Y(p);case 11:0===e.sent.status?(S.a.success("".concat(n.isUpdate?"\u66f4\u65b0":"\u6dfb\u52a0","\u5546\u54c1\u6210\u529f\uff01")),n.props.history.goBack()):S.a.success("".concat(n.isUpdate?"\u66f4\u65b0":"\u6dfb\u52a0","\u5546\u54c1\u5931\u8d25\uff01"));case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.loadData=function(){var e=Object(w.a)(j.a.mark((function e(t){var a,r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t[0]).loading=!0,e.next=4,n.getCategorys(t[0].value);case 4:r=e.sent,a.loading=!1,r&&r.length>0?(o=r.map((function(e){return{value:e._id,label:e.name,isLeaf:!0}})),a.children=o):a.isLeaf=!0,n.setState({options:Object(Qe.a)(n.state.options)});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getCategorys=function(){var e=Object(w.a)(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t);case 2:if(0!==(a=e.sent).status){e.next=10;break}if(r=a.data,0!==t){e.next=9;break}n.initOptions(a.data),e.next=10;break;case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.initOptions=function(){var e=Object(w.a)(j.a.mark((function e(t){var a,r,o,c,i,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.map((function(e){return{value:e._id,label:e.name,isLeaf:!1}})),r=Object(Xe.a)(n),o=r.isUpdate,c=r.product,i=c.pCategoryId,!o||"0"===i){e.next=9;break}return e.next=6,n.getCategorys(i);case 6:l=e.sent,l.map((function(e){return{value:e._id,label:e.name,isLeaf:!0}})),a.find((function(e){return e.value===i}));case 9:n.setState({options:a});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.uploadimg=r.a.createRef(),n.richtext=r.a.createRef(),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getCategorys(0)}},{key:"componentWillMount",value:function(){var e=this.props.location.state;this.isUpdate=!!e,this.product=e||{}}},{key:"render",value:function(){var e=this,t=this.isUpdate,a=this.product,n=a.pCategoryId,o=a.categoryId,c=a.imgs,i=a.detail,l=[];"0"===n||l.push(n),l.push(o),console.log("imgs",c);var s=this.props.form.getFieldDecorator,u=r.a.createElement("div",null,r.a.createElement(O.a,{type:"arrow-left",className:"arrow",onClick:function(){return e.props.history.goBack()}}),t?"\u4fee\u6539\u5546\u54c1":"\u6dfb\u52a0\u5546\u54c1");return r.a.createElement(je.a,{title:u,bordered:!1,className:"product-index product-edit"},r.a.createElement(Ne.a,Object.assign({},{labelCol:{span:2},wrapperCol:{span:12}},{onSubmit:this.submit}),r.a.createElement(ut,{label:"\u5546\u54c1\u540d\u79f0"},s("name",{initialValue:a.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0"}]})(r.a.createElement(Se.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0"}))),r.a.createElement(ut,{label:"\u5546\u54c1\u63cf\u8ff0"},s("desc",{initialValue:a.desc,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u63cf\u8ff0"}]})(r.a.createElement(mt,{autoSize:{minRows:1,maxRows:5},placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u63cf\u8ff0"}))),r.a.createElement(ut,{label:"\u5546\u54c1\u4ef7\u683c"},s("price",{initialValue:a.price,rules:[{required:!0,validator:this.validatePrice}]})(r.a.createElement(Se.a,{type:"number",addonAfter:"\u5143",placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u4ef7\u683c"}))),r.a.createElement(ut,{label:"\u5546\u54c1\u5206\u7c7b"},s("categorysId",{initialValue:l||[],rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5546\u54c1\u5206\u7c7b"}]})(r.a.createElement(Ge.a,{placeholder:"\u8bf7\u9009\u62e9\u5546\u54c1\u5206\u7c7b",options:this.state.options,loadData:this.loadData,onChange:this.onChangeSelect}))),r.a.createElement(ut,{label:"\u5546\u54c1\u56fe\u7247"},r.a.createElement(at,{ref:this.uploadimg,imgs:c})),r.a.createElement(ut,{label:"\u5546\u54c1\u8be6\u60c5",labelCol:{span:2},wrapperCol:{span:14}},r.a.createElement(st,{ref:this.richtext,detail:i})),r.a.createElement(ut,null,r.a.createElement(Ce.a,{type:"primary",htmlType:"submit"},"\u786e\u5b9a"))))}}]),a}(n.Component),dt=Ne.a.create()(pt),ft=(a(980),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"/pro/product",component:Je,exact:!0}),r.a.createElement(h.b,{path:"/pro/product/detail",component:Ze}),r.a.createElement(h.b,{path:"/pro/product/edit",component:dt}),r.a.createElement(h.a,{to:"/pro/product"}))}}]),a}(n.Component)),ht=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentWillMount",value:function(){this.props.setForm(this.props.form)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(Ne.a.Item,{label:"\u89d2\u8272\u540d\u79f0",labelCol:{span:4},wrapperCol:{span:12}},e("roleName",{initialValue:"",rules:[{required:!0,message:"\u89d2\u8272\u540d\u79f0\u5fc5\u987b\u8f93\u5165"}]})(r.a.createElement(Se.a,{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0"}))))}}]),a}(n.Component),gt=Ne.a.create()(ht),yt=(a(981),a(364)),vt=Ne.a.Item,bt=yt.a.TreeNode,Et=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(u.a)(this,a),(n=t.call(this,e)).onCheck=function(e){n.setState({checkedKeys:e})},n.getTreeNodes=function(e){return e.reduce((function(e,t){return e.push(r.a.createElement(bt,{title:t.title,key:t.key},t.children?n.getTreeNodes(t.children):null)),e}),[])},n.getMenus=function(){return n.state.checkedKeys};var o=n.props.role.menus;return n.state={checkedKeys:o},n}return Object(m.a)(a,[{key:"componentWillMount",value:function(){this.treeNodes=this.getTreeNodes(G)}},{key:"componentWillReceiveProps",value:function(e){var t=e.role.menus;this.setState({checkedKeys:t})}},{key:"render",value:function(){var e=this.props.role.name;return r.a.createElement("div",null,r.a.createElement(vt,{label:"\u89d2\u8272\u540d\u79f0",labelCol:{span:4},wrapperCol:{span:16}},r.a.createElement(Se.a,{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0",disabled:!0,value:e})),r.a.createElement(vt,null,r.a.createElement(yt.a,{checkable:!0,defaultExpandAll:!0,onCheck:this.onCheck,checkedKeys:this.state.checkedKeys},r.a.createElement(bt,{title:"\u5e73\u53f0\u6743\u9650",key:"all"},this.treeNodes))))}}]),a}(n.Component),Ot=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={roleList:[],loading:!1,isShowAdd:!1,isShowAuth:!1,role:{}},n.initColunms=function(){n.columns=[{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",render:function(e){return Oe()(e).format("YYYY-MM-DD  hh:mm:ss")}},{title:"\u6388\u6743\u65f6\u95f4",dataIndex:"auth_time",render:function(e){return Oe()(e).format("YYYY-MM-DD  hh:mm:ss")}},{title:"\u6388\u6743\u4eba",dataIndex:"auth_name"}]},n.getRoleList=Object(w.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0}),e.next=3,D("".concat(A,"/manage/role/list"));case 3:t=e.sent,n.setState({loading:!1}),0===t.status?(a=t.data,n.setState({roleList:a})):S.a.error("\u89d2\u8272\u5217\u8868\u83b7\u53d6\u5931\u8d25");case 6:case"end":return e.stop()}}),e)}))),n.addRole=function(){n.form.validateFields(function(){var e=Object(w.a)(j.a.mark((function e(t,a){var r,o,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("\u521b\u5efa\u89d2\u8272",a,t),t){e.next=10;break}return n.setState({isShowAdd:!1}),r=a.roleName,n.form.resetFields(),e.next=7,P(r);case 7:o=e.sent,console.log("xxxx",o),0===o.status?(S.a.success("\u89d2\u8272\u6dfb\u52a0\u6210\u529f\uff01"),c=o.data,n.setState((function(e){return{roleList:[].concat(Object(Qe.a)(e.roleList),[c])}}))):S.a.error("\u89d2\u8272\u6dfb\u52a0\u5931\u8d25\uff01");case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.updateRoleAuth=Object(w.a)(j.a.mark((function e(){var t,a,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isShowAuth:!1}),t=n.menuKeys.current.getMenus(),a=n.state.role,o=JSON.parse(r.a.$storage_utils.getUser()),a.auth_time=Date.now(),a.auth_name=o.username,a.menus=t,e.next=9,F(a);case 9:0===e.sent.status&&(a._id===o._id?(r.a.$storage_utils.removeUser(),n.props.history.push("/login"),S.a.success("\u5f53\u524d\u7528\u6237\u89d2\u8272\u6743\u9650\u8bbe\u7f6e\u6210\u529f\uff01")):o.role_id===a._id?(r.a.$storage_utils.removeUser(),n.props.history.replace("/login"),S.a.success("\u5f53\u524d\u7528\u6237\u89d2\u8272\u6743\u9650\u4fee\u6539\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\uff01")):(S.a.success("\u8bbe\u7f6e\u89d2\u8272\u6743\u9650\u6210\u529f\uff01"),n.setState({roleList:Object(Qe.a)(n.state.roleList)})));case 11:case"end":return e.stop()}}),e)}))),n.menuKeys=r.a.createRef(),n}return Object(m.a)(a,[{key:"componentWillMount",value:function(){this.initColunms()}},{key:"componentDidMount",value:function(){this.getRoleList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.role,n=t.roleList,o=t.loading,c=t.isShowAdd,i=t.isShowAuth,l=r.a.createElement("div",null,r.a.createElement(Ce.a,{type:"primary",style:{marginRight:10},onClick:function(){e.setState({isShowAdd:!0})}},"\u521b\u5efa\u89d2\u8272"),r.a.createElement(Ce.a,{type:"primary",disabled:!a._id,onClick:function(){return e.setState({isShowAuth:!0})}},"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650")),s={type:"radio",hideDefaultSelections:!0,onSelect:function(t){e.setState({role:t})}};return r.a.createElement(je.a,{type:"inner",className:"product-index",title:l},r.a.createElement(we.a,{rowSelection:s,columns:this.columns,dataSource:n,loading:o,bordered:!0,rowKey:"_id",pagination:We}),r.a.createElement(v.a,{title:"\u6dfb\u52a0\u89d2\u8272",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",visible:c,onOk:this.addRole,onCancel:function(){e.setState({isShowAdd:!1})}},r.a.createElement(gt,{setForm:function(t){return e.form=t}})),r.a.createElement(v.a,{title:"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650",visible:i,onOk:this.updateRoleAuth,onCancel:function(){e.setState({isShowAuth:!1})}},r.a.createElement(Et,{role:a,ref:this.menuKeys})))}}]),a}(n.Component),kt=function(e,t,a){t?/^[a-zA-Z0-9_]{4,6}$/.test(t)?a():a("\u5bc6\u7801\u5fc5\u987b\u7531\u6570\u5b57\u3001\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u7ec4\u6210,\u4e14\u957f\u5ea6\u4e3a 4~6 \u4f4d\uff01"):a("\u8bf7\u8f93\u5165\u5bc6\u7801")},xt=function(e,t,a){t?/^1(3|4|5|6|7|8|9)\d{9}$/.test(t)?a():a("\u624b\u673a\u53f7\u683c\u5f0f\u4e0d\u6b63\u786e"):a("\u8bf7\u8f93\u5165\u624b\u673a\u53f7")},_t=function(e,t,a){t?/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(t)?a():a("\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e"):a("\u8bf7\u8f93\u5165\u90ae\u7bb1")},jt=Ne.a.Item,wt=Ie.a.Option,Ct=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentWillMount",value:function(){this.props.setForm(this.props.form)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.roles,n=t.user,o={labelCol:{span:4},wrapperCol:{span:16}};return r.a.createElement(Ne.a,o,r.a.createElement(jt,{label:"\u7528\u6237\u540d"},e("username",{initialValue:n.username,rules:[{required:!0,message:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a"}]})(r.a.createElement(Se.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}))),n._id?null:r.a.createElement(jt,{label:"\u5bc6\u7801"},e("password",{initialValue:n.password,rules:[{validator:kt}]})(r.a.createElement(Se.a.Password,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}))),r.a.createElement(jt,{label:"\u624b\u673a\u53f7\u7801"},e("phone",{initialValue:n.phone,rules:[{validator:xt}]})(r.a.createElement(Se.a,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801"}))),r.a.createElement(jt,{label:"\u90ae\u7bb1"},e("email",{initialValue:n.email,rules:[{validator:_t}]})(r.a.createElement(Se.a,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"}))),r.a.createElement(jt,{label:"\u89d2\u8272"},e("role_id",{initialValue:n.role_id,rules:[{required:!0,message:"\u89d2\u8272\u4e0d\u80fd\u4e3a\u7a7a"}]})(r.a.createElement(Ie.a,{placeholder:"\u8bf7\u9009\u62e9\u89d2\u8272"},a.map((function(e){return r.a.createElement(wt,{key:e._id,value:e._id},e.name)}))))))}}]),a}(n.PureComponent),St=Ne.a.create()(Ct),Nt=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={users:[],roles:[],loading:!1,userEditorModal:!1},e.initColumns=function(){e.columns=[{title:"\u7528\u6237\u540d",dataIndex:"username"},{title:"\u90ae\u7bb1",dataIndex:"email"},{title:"\u7535\u8bdd",dataIndex:"phone"},{title:"\u6ce8\u518c\u65f6\u95f4",dataIndex:"create_time",render:function(e){return Oe()(e).format("YYYY-MM-DD  hh:mm:ss")}},{title:"\u6240\u5c5e\u89d2\u8272",dataIndex:"role_id",render:function(t){return e.roleNames[t]}},{title:"\u64cd\u4f5c",key:"action",render:function(t,a){return r.a.createElement("div",null,r.a.createElement(Re.a,{color:"#2DAC91",onClick:function(){return e.editUser(a)}},"\u4fee\u6539"),r.a.createElement(Re.a,{color:"#2DAC91",onClick:function(){return e.delUser(a)}},"\u5220\u9664"))}}]},e.getUserList=Object(w.a)(j.a.mark((function t(){var a,n,r,o;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,U();case 3:a=t.sent,e.setState({loading:!1}),0===a.status?(n=a.data,r=n.users,o=n.roles,e.initRoleName(o),e.setState({users:r,roles:o})):S.a.error("\u7528\u6237\u5217\u8868\u83b7\u53d6\u5931\u8d25");case 6:case"end":return t.stop()}}),t)}))),e.initRoleName=function(t){var a=t.reduce((function(e,t){return e[t._id]=t.name,e}),{});e.roleNames=a},e.delUser=function(t){var a=t._id,n=t.username;v.a.confirm({title:"\u786e\u5b9a\u5220\u9664".concat(n,"\u5417\uff1f"),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){var t=Object(w.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(a);case 2:0===t.sent.status&&(S.a.success("\u5220\u9664\u7528\u6237\u6210\u529f"),e.getUserList());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})},e.editUser=function(t){e.setState({userEditorModal:!0}),e.user=t,console.log("\u7528\u6237\u5f53\u524d",t)},e.addOrEditUser=function(){e.form.validateFields(function(){var t=Object(w.a)(j.a.mark((function t(a,n){var o,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=8;break}return e.user&&(n._id=e.user._id),t.next=4,W(n);case 4:o=t.sent,e.form.resetFields(),e.setState({userEditorModal:!1}),0===o.status?(c=JSON.parse(r.a.$storage_utils.getUser()),console.log("user",e.user,c),c._id===e.user._id?(r.a.$storage_utils.removeUser(),e.props.history.push("/login"),S.a.success("\u5f53\u524d\u7528\u6237\u4fe1\u606f\u88ab\u91cd\u7f6e\uff0c\u8bf7\u91cd\u65b0\u767b\u9646\uff01")):(S.a.success("".concat(e.user?"\u4fee\u6539":"\u6dfb\u52a0","\u7528\u6237\u6210\u529f")),e.getUserList())):S.a.error("".concat(e.user?"\u4fee\u6539":"\u6dfb\u52a0","\u7528\u6237\u5931\u8d25"));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},e}return Object(m.a)(a,[{key:"componentWillMount",value:function(){this.initColumns()}},{key:"componentDidMount",value:function(){this.getUserList()}},{key:"render",value:function(){var e=this,t=this.columns,a=this.user||{},n=this.state,o=n.users,c=n.roles,i=n.userEditorModal,l=r.a.createElement("div",null,r.a.createElement(Ce.a,{type:"primary",style:{marginRight:10},onClick:function(){e.user=null,e.setState({userEditorModal:!0})}},"\u521b\u5efa\u7528\u6237"));return r.a.createElement(je.a,{type:"inner",className:"product-index",title:l},r.a.createElement(we.a,{columns:t,dataSource:o,bordered:!0,pagination:We,rowKey:"_id"}),r.a.createElement(v.a,{title:a._id?"\u4fee\u6539\u7528\u6237":"\u6dfb\u52a0\u7528\u6237",visible:i,onOk:this.addOrEditUser,onCancel:function(){e.form.resetFields(),e.setState({userEditorModal:!1})}},r.a.createElement(St,{setForm:function(t){return e.form=t},roles:c,user:a})))}}]),a}(n.Component),It=(a(293),a(177)),Dt=a(570),Lt=a.n(Dt),At=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={sales:[1e3,520,200,334,390,330,220],store:[100,50,10,34,30,39,22],loading:!1},e.chartOption=function(e,t){return{title:{show:!0,text:"\u9500\u552e\u66f2\u7ebf\u56fe"},color:["#2DAC91","#f00","#E8F7F6","#E6F2FD","#F1EAFF"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0,show:!0},xAxis:[{type:"category",data:["\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d","\u661f\u671f\u65e5"],axisTick:{alignWithLabel:!1}}],yAxis:[{type:"value",boundaryGap:["0%","20%"]}],series:[{name:"\u9500\u91cf",type:"bar",barWidth:"35%",data:e},{name:"\u5e93\u5b58",type:"bar",barWidth:"35%",data:t}]}},e.update=function(){e.setState({loading:!0}),e.setState((function(e){return{sales:e.sales.map((function(e){return e+1})),store:e.store.reduce((function(e,t){return e.push(t-1),e}),[])}}),(function(){setInterval((function(){e.setState({loading:!1})}),500)}))},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.sales,n=t.store,o=t.loading,c=r.a.createElement("div",null,r.a.createElement(Ce.a,{type:"primary",style:{marginRight:10},onClick:function(){e.update()}},"\u66f4\u65b0"));return r.a.createElement(It.a,{spinning:o,tip:"\u66f4\u65b0\u4e2d...."},r.a.createElement(je.a,{type:"inner",className:"product-index",title:c},r.a.createElement(Lt.a,{option:this.chartOption(a,n),style:{height:"490px"}})))}}]),a}(n.Component),Mt=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={},n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,"\u6298\u7ebf\u56fe")}}]),a}(n.Component),Tt=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={},n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,"\u997c\u72b6\u56fe")}}]),a}(n.Component),Pt=a(571),Ft=a.n(Pt),Ut=(a(1287),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"notFoundPage"},r.a.createElement("img",{src:Ft.a,alt:"NotFound"}),r.a.createElement(f.b,{to:"/"},r.a.createElement(Ce.a,{className:"toIndex",type:"primary"},"\u56de\u5230\u9996\u9875")))}}]),a}(n.Component)),Kt=a(572),Wt=a.n(Kt),zt=[{element:"#navAside",popover:{title:"\u83dc\u5355\u5bfc\u822a",description:"\u70b9\u51fb\u83dc\u5355\u53ef\u5207\u6362\u83dc\u5355\u5185\u5bb9",position:"right"},padding:0},{element:"#collapseBtn",stageBackground:"#fff",popover:{title:"\u6298\u53e0\u6309\u94ae",description:"\u70b9\u51fb\u6536\u7f29\u548c\u5c55\u5f00\u83dc\u5355\u5bfc\u822a",position:"bottom"}},{element:"#currentTime",popover:{title:"\u65f6\u95f4",description:"\u5f53\u524d\u65f6\u95f4",position:"left"}},{element:"#usercenter",popover:{title:"\u4e2a\u4eba\u4e2d\u5fc3",description:"\u70b9\u51fb\u56fe\u6807\u663e\u793a\u64cd\u4f5c",position:"left"}}],Rt=(a(1288),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={driver:null},e.guide=function(){e.driver.defineSteps(zt),e.driver.start()},e.showDriver=function(t){t.nativeEvent.stopImmediatePropagation(),e.guide()},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.driver=new Wt.a({opacity:.6,stageBackground:"#2DAC91"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"main-container"},r.a.createElement("div",{className:"guide-desc"},r.a.createElement(O.a,{type:"bulb"}),"\u70b9\u51fb\u6309\u94ae\u53ef\u67e5\u770b\u672c\u7ba1\u7406\u7cfb\u7edf\u7684\u64cd\u4f5c"),r.a.createElement(Ce.a,{type:"primary",onClick:function(t){return e.showDriver(t)}},"\u5f15\u5bfc"))}}]),a}(n.Component)),$t=a(277),Bt=a.n($t),Ht=function(e){return new Promise((function(t,a){var n=e.target.files,r=new FileReader;r.onload=function(e){try{var n=e.target.result,r=Bt.a.read(n,{type:"binary"}),o=[];for(var c in r.Sheets)r.Sheets.hasOwnProperty(c)&&(o=o.concat(Bt.a.utils.sheet_to_json(r.Sheets[c])));t(o)}catch(i){a("\u5931\u8d25")}},r.readAsBinaryString(n[0])}))},Yt=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"demo.xlsx",n=e.map((function(e,t){return Object.assign({},{key:e.key,title:e.title,position:String.fromCharCode(65+t)+1})})).reduce((function(e,t){return Object.assign({},e,Object(C.a)({},t.position,{key:t.key,v:t.title}))}),{}),r=t.map((function(t,a){return e.map((function(e,n){return Object.assign({},{content:t[e.key],position:String.fromCharCode(65+n)+(a+2)})}))})).reduce((function(e,t){return e.concat(t)})).reduce((function(e,t){return Object.assign({},e,Object(C.a)({},t.position,{v:t.content}))}),{}),o=Object.assign({},n,r),c=Object.keys(o),i="".concat(c[0],":").concat(c[c.length-1]),l={SheetNames:["mySheet"],Sheets:{mySheet:Object.assign({},o,{"!ref":i,"!cols":[{wpx:45},{wpx:100},{wpx:200},{wpx:80},{wpx:150},{wpx:100},{wpx:300},{wpx:300}]})}};Bt.a.writeFile(l,a)},Jt=(a(1295),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={lists:[{username:"Jacqui",age:32,sex:"\u7537",phone:"15617990221",id:0},{age:20,id:1,phone:15617990221,sex:"\u5973",username:"Jack"}],excelIn_flag:!1,loading:!1,excelName:""},e.excelIn=function(t){t.persist();var a=t.currentTarget.files[0].name;Ht(t).then((function(t){e.setState({loading:!0}),e.setState({lists:t,excelIn_flag:!0,excelName:a}),setInterval((function(){e.setState({loading:!1})}),1e3)}),(function(e){console.log("\u5bfc\u5165\u5931\u8d25",e)}))},e.downloadExcel=function(){var t=e.state.lists;Yt(e.columns,t,"\u7528\u6237\u4fe1\u606f\u8868.xlsx")},e.initForm=function(){e.columns=[{title:"\u7f16\u53f7",dataIndex:"id",key:"id",render:function(e){return r.a.createElement("a",null,e)}},{title:"\u7528\u6237\u540d",dataIndex:"username",key:"username"},{title:"\u5e74\u9f84",dataIndex:"age",key:"age"},{title:"\u6027\u522b",dataIndex:"sex",key:"sex"},{title:"\u8054\u7cfb\u65b9\u5f0f",dataIndex:"phone",key:"phone"}]},e}return Object(m.a)(a,[{key:"componentWillMount",value:function(){this.initForm()}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.excelIn_flag,o=t.loading,c=t.excelName,i=r.a.createElement("div",null,r.a.createElement(Ce.a,{type:"primary",style:{marginRight:20},className:"uploadFile"},r.a.createElement(Se.a,{type:"file",accept:".xls,.xlsx",onChange:function(t){return e.excelIn(t)}}),n?"".concat(c,"\u6587\u4ef6\u5bfc\u5165\u6210\u529f\uff01"):"\u8bf7\u9009\u62e9\u8981\u5bfc\u5165\u7684Excel\u6587\u4ef6"),r.a.createElement(Ce.a,{type:"primary",onClick:function(){return e.downloadExcel()}},"\u5bfc\u51faExcel"));return r.a.createElement(je.a,{type:"inner",className:"product-index",title:i},r.a.createElement(we.a,{columns:this.columns,dataSource:a,rowKey:"id",loading:o}))}}]),a}(n.Component)),Vt=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={},n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"/excel/inOrOut",component:Jt}),r.a.createElement(h.a,{to:"/excel/inOrOut"}))}}]),a}(n.Component),qt=(a(1296),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container category-container"},r.a.createElement(je.a,{title:"\u6ed1\u52a8\u9a8c\u8bc1"}))}}]),a}(n.Component)),Zt=a(573),Gt=a.n(Zt),Qt=a(574),Xt=a.n(Qt),ea=a(575),ta=a.n(ea),aa=a(576),na=a.n(aa),ra=a(577),oa=a.n(ra),ca=(a(1297),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).liList=function(e){for(var t=[],a=0;a<e;a++)t.push(a);return t},e.olLiClick=function(t){e.props.serialNumClick(t)},e.serialNumChecked=function(t){for(var a=e.props.serialNum,n=0;n<a;n++)e.refs.serial_ol.children[n].className="";e.refs.serial_ol.children[t].className="current"},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.serialNum,n=t.currentIndex,o=this.liList(a);return r.a.createElement("ol",{ref:"serial_ol"},o.map((function(t){return r.a.createElement("li",{className:n===t?"current":"",index:t,key:t,onClick:function(){e.olLiClick(t)}},t+1)})))}}]),a}(n.Component)),ia=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).getDom=function(){var e=n.refs.sliderBox,t=e.children[0],a=t.offsetWidth,r=t.children[0],o=e.children[1],c=(o.children[0],o.children[1],r.children.length);n.setState({serialNum:c,sliderWidth:a,parentDom:r});var i=r.children[0];r.appendChild(i.cloneNode(!0)),n.props.autoPlay&&n.autoPlay()},n.serialNumClick=function(e){var t=n.state,a=t.parentDom,r=t.sliderWidth;n.setState({currentIndex:e}),n.moveSlider(a,-e*r)},n.mouseEnter=function(){n.refs.arrow.style.display="block",n.stopautoPlay()},n.mouseeave=function(){n.refs.arrow.style.display="none",n.autoPlay()},n.preBtn=function(){var e=n.state,t=e.currentIndex,a=e.serialNum,r=e.parentDom,o=e.sliderWidth;setTimeout((function(){0===t&&(n.serialNumClick(0),n.setState({currentIndex:a}),r.style.left=-a*o+"px"),n.setState((function(e){return{currentIndex:e.currentIndex-1}})),n.serialNumClick(n.state.currentIndex)}),0)},n.nextBtn=function(){var e=n.state,t=e.currentIndex,a=e.serialNum,r=e.parentDom,o=e.sliderWidth;setTimeout((function(){t===a&&(r.style.left="0px",n.setState({currentIndex:0})),n.setState((function(e){return{currentIndex:e.currentIndex+1}})),n.state.currentIndex<a?n.serialNumClick(n.state.currentIndex):(n.moveSlider(r,-n.state.currentIndex*o),n.refs.serialNum.serialNumChecked(0))}),0)},n.autoPlay=function(){var e=n.props.autoplaySpeed;n.stopautoPlay();var t=setInterval((function(){n.nextBtn()}),e);n.setState({timerId:t})},n.stopautoPlay=function(){clearInterval(n.state.timerId)},n.moveSlider=function(e,t){e.timerId&&(clearInterval(e.timerId),e.timerId=null),e.timerId=setInterval((function(){var a=10,n=e.offsetLeft;if(n>t&&(a=-Math.abs(a)),Math.abs(n-t)<=Math.abs(a))return clearInterval(e.timerId),void(e.style.left=t+"px");n+=a,e.style.left=n+"px"}),8)},n.state={currentIndex:0,serialNum:0,parentDom:"",moveLen:0,sliderWidth:0,timerId:null},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getDom()}},{key:"render",value:function(){var e=this,t=this.state,a=t.serialNum,n=(t.parentDom,t.moveLen,t.sliderWidth,t.currentIndex);return console.log("xxxx",this.props),r.a.createElement("div",{className:"main-container magnifier"},r.a.createElement("div",{className:"slider-container",ref:"sliderBox",onMouseEnter:function(){e.mouseEnter()},onMouseLeave:function(){e.mouseeave()}},r.a.createElement("div",{className:"slider"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("img",{src:Gt.a,alt:""})),r.a.createElement("li",null,r.a.createElement("img",{src:Xt.a,alt:""})),r.a.createElement("li",null,r.a.createElement("img",{src:ta.a,alt:""})),r.a.createElement("li",null,r.a.createElement("img",{src:na.a,alt:""})),r.a.createElement("li",null,r.a.createElement("img",{src:oa.a,alt:""}))),r.a.createElement(ca,{serialNum:a,currentIndex:n,serialNumClick:this.serialNumClick,ref:"serialNum"})),r.a.createElement("div",{className:"arrow",ref:"arrow"},r.a.createElement("span",{className:"leftArr",onClick:function(){e.preBtn()}},"<"),r.a.createElement("span",{className:"rightArr",onClick:function(){e.nextBtn()}},">"))))}}]),a}(n.Component);ia.defaultProps={autoPlay:!0,autoplaySpeed:2e3};var la=ia,sa=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(m.a)(a,[{key:"render",value:function(){var e={autoPlay:!1,autoplaySpeed:3e3};return r.a.createElement("div",{className:"main-container magnifier"},r.a.createElement(la,e,r.a.createElement("ul",null,r.a.createElement("li",null,"1"),r.a.createElement("li",null,"2"),r.a.createElement("li",null,"3"),r.a.createElement("li",null,"4"),r.a.createElement("li",null,"5"))))}}]),a}(n.Component),ua=(a(1298),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-container magnifier"},r.a.createElement(je.a,{title:"react-intl-universal\u5e93\u57fa\u672c\u4f7f\u7528",style:{height:"100%"}},r.a.createElement("ul",{className:"user_intl"},r.a.createElement("li",null,r.a.$intl.get("hello")),r.a.createElement("li",null,r.a.$intl.getHTML("hello_html")),r.a.createElement("li",null,r.a.$intl.get("hello_num",{num:0})),r.a.createElement("li",null,r.a.$intl.get("hello_usd",{price:123456.78})),r.a.createElement("li",null,r.a.$intl.get("hello_starttime",{start:new Date})),r.a.createElement("li",null,r.a.$intl.get("hello_endtime",{end:new Date})),r.a.createElement("li",null,r.a.createElement("a",{href:"https://github.com/alibaba/react-intl-universal",target:"_blank"},"\u66f4\u591a\u53c2\u8003")))))}}]),a}(n.Component)),ma=a(578),pa=a.n(ma),da=a(579),fa=a.n(da),ha=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).init=function(){var t=e.refs.box,a=t.children[0],n=a.children[1],r=t.children[1],o=r.children[0];a.onmouseenter=function(){n.style.display="block",r.style.display="block"},a.onmouseleave=function(e){n.style.display="none",r.style.display="none"},t.onmousemove=function(e){var a=(e=e||window.event).pageX-t.offsetLeft-n.offsetWidth/2,c=e.pageY-t.offsetTop-n.offsetHeight/2;a=a<0?0:a,c=c<0?0:c;var i=t.offsetWidth-n.offsetWidth,l=t.offsetHeight-n.offsetHeight;a=a>i?i:a,c=c>l?l:c,n.style.left="".concat(a,"px"),n.style.top="".concat(c,"px");var s=a/i*(o.offsetWidth-r.offsetWidth),u=c/l*(o.offsetHeight-r.offsetHeight);o.style.left="".concat(-s,"px"),o.style.top="".concat(-u,"px")}},e}return Object(m.a)(a,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){this.init()}},{key:"render",value:function(){return r.a.createElement("div",{className:"main-container magnifier"},"\u653e\u5927\u955c\u6548\u679c",r.a.createElement("div",{className:"box",ref:"box"},r.a.createElement("div",{className:"small"},r.a.createElement("img",{src:fa.a,alt:""}),r.a.createElement("div",{className:"mask"})),r.a.createElement("div",{className:"big"},r.a.createElement("img",{src:pa.a,alt:""}))))}}]),a}(n.Component),ga=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"/com/security",component:qt}),r.a.createElement(h.b,{path:"/com/slider",component:sa}),r.a.createElement(h.b,{path:"/com/user-intl",component:ua}),r.a.createElement(h.b,{path:"/com/magnifier",component:ha}),r.a.createElement(h.a,{to:"/com/security"}))}}]),a}(n.Component),ya=(a(1299),b.a.Footer),va=b.a.Sider,ba=b.a.Content,Ea=v.a.confirm,Oa=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={collapsed:!1},e.toggleCollapsed=function(){e.setState({collapsed:!e.state.collapsed})},e.loginOut=function(){Ea({content:"\u786e\u5b9a\u8981\u9000\u51fa\u767b\u5f55\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){console.log("OK",e.props.history),r.a.$storage_utils.removeUser(),e.props.history.replace("/login")}})},e}return Object(m.a)(a,[{key:"render",value:function(){var e=JSON.parse(s.getUser());if(console.log("\u7528\u6237\u4fe1\u606f",e),!e||!e._id)return r.a.createElement(h.a,{to:"/login"});var t=this.state.collapsed;return r.a.createElement(b.a,{style:{minHeight:"100%"}},r.a.createElement(va,{collapsed:t},r.a.createElement(re,{collapsed:t})),r.a.createElement(b.a,null,r.a.createElement(xe,{collapsed:t,toggleCollapsed:this.toggleCollapsed,loginOut:this.loginOut}),r.a.createElement(ba,null,r.a.createElement(h.d,null,r.a.createElement(h.a,{exact:!0,from:"/",to:"/home"}),r.a.createElement(h.b,{path:"/pro/category",component:ze}),r.a.createElement(h.b,{path:"/pro/product",component:ft}),r.a.createElement(h.b,{path:"/role",component:Ot}),r.a.createElement(h.b,{path:"/user",component:Nt}),r.a.createElement(h.b,{path:"/graph/bar",component:At}),r.a.createElement(h.b,{path:"/graph/line",component:Mt}),r.a.createElement(h.b,{path:"/graph/pie",component:Tt}),r.a.createElement(h.b,{path:"/home",component:_e}),r.a.createElement(h.b,{path:"/guide",component:Rt}),r.a.createElement(h.b,{path:"/excel",component:Vt}),r.a.createElement(h.b,{path:"/com",component:ga}),r.a.createElement(h.b,{component:Ut}))),r.a.createElement(ya,{style:{textAlign:"center",color:"#ccc"}},"\u63a8\u8350\u83b7\u5f97\u6700\u4f73\u7684\u6548\u679c\u4f53\u9a8c")))}}]),a}(n.Component),ka=(a(1300),a(363)),xa=(a(1302),a(1306)),_a=a(1308),ja=Ne.a.Item,wa=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1},e.enterLoading=function(){e.setState({loading:!0})},e.handleSubmit=function(t){t.preventDefault(),e.props.form.validateFields(function(){var t=Object(w.a)(j.a.mark((function t(a,n){var r,o,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=10;break}return r=n.username,o=n.password,console.log("\u7528\u6237\u8f93\u5165\u6570\u636e",n),t.next=5,z({username:r,password:o});case 5:c=t.sent,e.enterLoading(),0===c.status?(S.a.success("\u767b\u5f55\u6210\u529f\uff01"),s.setUser(JSON.stringify(c.data)),e.props.history.replace("/")):(e.setState({loading:!1}),S.a.error(c.msg)),t.next=11;break;case 10:console.log("\u68c0\u9a8c\u5931\u8d25!");case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},e.validatePwd=function(e,t,a){t?t.length<4?a("\u5bc6\u7801\u957f\u5ea6\u5fc5\u987b\u5927\u4e8e4\u4f4d\uff01"):t.length>12?a("\u5bc6\u7801\u957f\u5ea6\u5fc5\u987b\u5c0f\u4e8e12\u4f4d"):/^[a-zA-Z0-9_]+$/.test(t)?a():(console.log(t),a("\u5bc6\u7801\u5fc5\u987b\u662f\u7531\u6570\u5b57\u3001\u5b57\u6bcd\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210")):a("\u5fc5\u987b\u8f93\u5165\u5bc6\u7801\uff01")},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){ka.a.open({message:"\u6b22\u8fce\u4f7f\u7528\u540e\u53f0\u7ba1\u7406\u5e73\u53f0",duration:null,description:"\u8d26\u53f7 admin(\u7ba1\u7406\u5458) \u5176\u5b83(\u6e38\u5ba2) \u5bc6\u7801\u968f\u610f"})}},{key:"componentWillUnmount",value:function(){ka.a.destroy(),this.timer&&clearTimeout(this.timer)}},{key:"render",value:function(){var e=JSON.parse(s.getUser());if(e&&e.username)return r.a.createElement(h.a,{to:"/"});var t=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"loginForm"},r.a.createElement("h2",null,"\u7528\u6237\u767b\u5f55"),r.a.createElement(Ne.a,{name:"normal_login",className:"login-form",onSubmit:this.handleSubmit},r.a.createElement(ja,null,t("username",{rules:[{required:!0,whitespace:!1,message:"Please input your username!"},{min:4,message:"\u7528\u6237\u540d\u957f\u5ea6\u5fc5\u987b\u5927\u4e8e4\u4f4d\uff01"},{max:12,message:"\u7528\u6237\u540d\u957f\u5ea6\u5fc5\u987b\u5c0f\u4e8e12\u4f4d"},{pattern:/^[a-zA-Z0-9_]+$/,message:"\u7528\u6237\u540d\u5fc5\u987b\u662f\u7531\u6570\u5b57\u3001\u5b57\u6bcd\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210"}]})(r.a.createElement(Se.a,{prefix:r.a.createElement(xa.a,{className:"site-form-item-icon"}),placeholder:"Username",className:"form-input"}))),r.a.createElement(ja,null,t("password",{rules:[{validator:this.validatePwd}]})(r.a.createElement(Se.a,{prefix:r.a.createElement(_a.a,{className:"site-form-item-icon"}),type:"password",className:"form-input",placeholder:"Password"}))),r.a.createElement(ja,{name:"submit-btn",className:"submitBtn"},r.a.createElement(Ce.a,{type:"primary",htmlType:"submit",className:"login-form-button",loading:this.state.loading},"\u767b\u5f55")))))}}]),a}(n.Component),Ca=Ne.a.create()(wa),Sa=Object(x.b)((function(e){return{userinfo:e.userinfo}}),{loginFunc:function(e,t){return function(){var t=Object(w.a)(j.a.mark((function t(a){var n,r,o;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(e);case 2:0===(n=t.sent).status?(r=n.data,Q.props.history.replace("/"),G.setUser(JSON.stringify(r)),a({type:"reciver_user",data:r})):(o=n.msg,a({type:"show_error_msg",data:o}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(Ca),Na={"en-us":a(388),"zh-cn":a(389)},Ia=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={initDone:!1},e.loadLocales=function(){y.a.determineLocale({urlLocaleKey:"lang",cookieLocaleKey:"lang"});y.a.init({currentLocale:r.a.$storage_utils.getLang("local_lang")||"zh-cn",locales:Na}).then((function(){e.setState({initDone:!0})}))},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.loadLocales()}},{key:"render",value:function(){return this.state.initDone&&r.a.createElement(f.a,null,r.a.createElement(h.d,null," ",r.a.createElement(h.b,{path:"/login",component:Sa}),r.a.createElement(h.b,{path:"/",component:Oa})))}}]),a}(n.Component),Da=a(124),La=JSON.parse(s.getUser());var Aa=Object(Da.combineReducers)({userinfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:La,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"reciver_user":return t.data;case"show_error_msg":var a=t.data;return Object(me.a)(Object(me.a)({},e),{},{errorMsg:a});default:return e}},headetitle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u9996\u9875",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"set_head_title":return t.data;default:return e}}}),Ma=a(580),Ta=a(581),Pa=Object(Da.createStore)(Aa,Object(Ta.composeWithDevTools)(Object(Da.applyMiddleware)(Ma.a)));ve(!0),r.a.$storage_utils=s,r.a.$intl=y.a,c.a.render(r.a.createElement(x.a,{store:Pa},r.a.createElement(Ia,null)),document.getElementById("root"))},294:function(e,t,a){},388:function(e){e.exports=JSON.parse('{"lang":"en-us","hello":"Hello React!","admin_manager":"BMS","menu_index":"Home","menu_product":"Commodity","menu_product_category":"Category Management ","menu_product_pro":"Commodity management","menu_role":"Role management","menu_user":"User management","menu_graph":"Graphic icon","menu_graph_bar":"Bar chart","menu_graph_line":"Line chart","menu_graph_pie":"Pie chart","menu_excel":"Excel","menu_excel_in_out":"Excel import and export","menu_com":"Common components","menu_com_security":"Safety verification","menu_com_slider":"Handwritten rotation","menu_com_upload":"ReactIntl","menu_com_magnifier":"Magnifying glass effect","menu_code":"Project code address","menu_guide":"Guide","dropdown_user":"User settings","dropdown_sys":"System settings","dropdown_logiout":"Log out","personal_center":"Personal Center"}')},389:function(e){e.exports=JSON.parse('{"lang":"zh-cn","admin_manager":"\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf","menu_index":"\u9996\u9875","menu_product":"\u5546\u54c1","menu_product_category":"\u54c1\u7c7b\u7ba1\u7406","menu_product_pro":"\u5546\u54c1\u7ba1\u7406","menu_role":"\u89d2\u8272\u7ba1\u7406","menu_user":"\u7528\u6237\u7ba1\u7406","menu_graph":"\u56fe\u5f62\u56fe\u6807","menu_graph_bar":"\u67f1\u72b6\u56fe","menu_graph_line":"\u6298\u7ebf\u56fe","menu_graph_pie":"\u997c\u56fe","menu_excel":"Excel","menu_excel_in_out":"Excel\u5bfc\u5165\u5bfc\u51fa","menu_com":"\u5e38\u7528\u7ec4\u4ef6","menu_com_security":"\u5b89\u5168\u6821\u9a8c","menu_com_slider":"\u624b\u5199\u8f6e\u64ad","menu_com_upload":"ReactIntl","menu_com_magnifier":"\u653e\u5927\u955c\u6548\u679c","menu_code":"\u9879\u76ee\u4ee3\u7801\u5730\u5740","menu_guide":"\u5f15\u5bfc\u6307\u5357","dropdown_user":"\u7528\u6237\u8bbe\u7f6e","dropdown_sys":"\u7cfb\u7edf\u8bbe\u7f6e","dropdown_logiout":"\u9000\u51fa\u767b\u5f55","personal_center":"\u4e2a\u4eba\u4e2d\u5fc3","hello":"\u7eaf\u6587\u5b57,\u4f7f\u7528intl.get()","hello_html":"\u5e26<span style=\'color:red;\'>html\u6a21\u677f</span>\u7684\u6587\u5b57,\u4f7f\u7528intl.getHTML()\u65b9\u6cd5","hello_num":"\u6570\u5b57\u5f62\u5f0f\u548c\u5343\u5206\u4f4d\u5206\u9694\u7b26 {num, plural, =0 {\u503c1\u3002} =1 {\u503c2\u3002} other {###.}}","hello_usd":"\u4ef7\u683c\u662f {price, number, USD}","hello_starttime":"\u5f00\u59cb\u65f6\u95f4 {start, date}","hello_endtime":"\u7ed3\u675f\u65f6\u95f4  {end, date, long}"}')},551:function(e,t){},553:function(e,t,a){e.exports=a.p+"static/media/logo.5eec74d3.jpg"},571:function(e,t,a){e.exports=a.p+"static/media/404.5a186c66.jpg"},573:function(e,t,a){e.exports=a.p+"static/media/wf1.52628cca.jpg"},574:function(e,t,a){e.exports=a.p+"static/media/wf2.7e1fad13.jpg"},575:function(e,t,a){e.exports=a.p+"static/media/wf3.55b8b439.jpg"},576:function(e,t,a){e.exports=a.p+"static/media/wf4.0e64f75b.jpg"},577:function(e,t,a){e.exports=a.p+"static/media/wf5.a6e0f6bf.jpg"},578:function(e,t,a){e.exports=a.p+"static/media/magnifier-big.29655a38.jpg"},579:function(e,t,a){e.exports=a.p+"static/media/magnifier-small.6d855e03.jpg"},587:function(e,t,a){e.exports=a(1303)},592:function(e,t,a){},605:function(e,t){},620:function(e,t,a){},685:function(e,t,a){var n={"./en-us.json":388,"./zh-cn.json":389};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id=685},69:function(e,t,a){e.exports={c_fff:"#fff",main_color:"#2DAC91",main_color_light:"rgba(45, 172, 145, 0.2)",c_121212:"#121212",gray_shadow:"1px 7px 4px rgba(0, 0, 0, 0.1)",gray_white:"#eceef1",light_dark:"rgba(18, 18, 18, 0.85)"}},700:function(e,t,a){},704:function(e,t,a){},980:function(e,t,a){}},[[587,1,2]]]);
//# sourceMappingURL=main.f6c4fe83.chunk.js.map